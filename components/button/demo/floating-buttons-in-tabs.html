<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="UTF-8">
		<link rel="stylesheet" href="../../demo/styles.css" type="text/css">
		<script type="module">
			import '../../demo/demo-page.js';
			import '../button.js';
			import '../floating-buttons.js';
		</script>
		<style>
			/* ripping these off for now until we can get a local tabs menu to test this on. */
			.vui-tabmenu {
				border-bottom: 1px solid #dddddd;
				list-style: none;
				margin-bottom: 0;
				margin-top: 0;
				padding-left: 0;
			}
			.vui-tabmenu::after, .vui-tabmenu::before {
				content: " ";
				display: table;
			}
			.vui-tabmenu::after {
				clear: both;
			}
			.vui-tabmenu > .vui-tabmenu-item {
				display: block;
				float: left;
				margin-bottom: -1px;
				overflow: hidden;
				position: relative;
				text-align: center;
			}
			.vui-tabmenu > .vui-tabmenu-item > a {
				border: 1px solid transparent;
				color: #a2a2a2;
				display: block;
				line-height: 1.428571429;
				margin-right: 2px;
				padding: 10px 15px;
				position: relative;
			}
			.vui-tabmenu > .vui-tabmenu-item:last-child > a {
				margin-right: 0;
			}
			.vui-tabmenu > .vui-tabmenu-item > a:hover {
				color: #666666;
			}
			.vui-tabmenu > .vui-tabmenu-item-select > a {
				background-color: #fafafa;
				border: 1px solid #dddddd;
				border-bottom-color: transparent;
				color: #666666;
				cursor: default;
				font-weight: bold;
			}
			.vui-tabmenu > .vui-tabmenu-item > a > .vui-tabmenu-item-blue {
				background-color: #bababa;
				display: block;
				height: 16px;
				position: absolute;
				right: -3px;
				top: 10px;
				width: 1px;
			}
			.vui-tabmenu > .vui-tabmenu-item-select-prev > a > .vui-tabmenu-item-blue,
			.vui-tabmenu > .vui-tabmenu-item:last-child > a > .vui-tabmenu-item-blue {
				display: none;
			}
			.vui-tabmenu > .vui-tabmenu-item-select:last-child > a > .vui-tabmenu-item-blue,
			.vui-tabmenu > .vui-tabmenu-item-select > a > .vui-tabmenu-item-blue {
				background-color: #00617f;
				border: 1px solid #00617f;
				display: block;
				height: 2px;
				left: -1px;
				position: absolute;
				top: -1px;
				width: 100%;
			}
			[dir="rtl"] .vui-tabmenu > .vui-tabmenu-item-select:last-child > a > .vui-tabmenu-item-blue,
			[dir="rtl"] .vui-tabmenu > .vui-tabmenu-item-select > a > .vui-tabmenu-item-blue {
				right: -1px;
			}
			.d2l-textblock {
				margin-bottom: 0;
				word-wrap: break-word;
			}
			.d2l-hidden {
				display: none !important;
			}
		</style>
	</head>
	<body unresolved>
		<d2l-demo-page page-title="d2l-floating-buttons">
			<h2>Floating Buttons In a Tab Menu</h2>
			<ul class="vui-tabmenu" role="tablist" id="TabMenu">
				<li class="vui-tabmenu-item vui-tabmenu-item-select" role="presentation" style="width: 50%;">
					<a id="TabOne" href="javascript:void(0);" role="tab" aria-selected="true" tabindex="-1">
						Coffee<span class="vui-tabmenu-item-blue">
						</span>
					</a>
				</li>
				<li class="vui-tabmenu-item vui-tabmenu-item-select-next" role="presentation" style="width: 50%;">
					<a id="TabTwo" href="javascript:void(0);" role="tab" aria-selected="false" tabindex="0">
						Tea<span class="vui-tabmenu-item-blue">
						</span>
					</a>
				</li>
			</ul>

			<div class="" id="CtnOne">
				<div class="d2l-textblock">
					<br>
					<d2l-code-view id="demo-codeview1" language="html" hide-language>
						<textarea><d2l-floating-buttons id="wc-buttons" fix-obscured-focus>
							<d2l-button primary id="btn-make-more">Brew more Coffee!</d2l-button>
						</d2l-floating-buttons></textarea>
					</d2l-code-view>
					<br>
					<d2l-button id="btn-remove-floating">Remove Floating Buttons</d2l-button>
					<d2l-button id="btn-append-floating">Append Floating Buttons</d2l-button>
					<br><br>
					<d2l-button id="btn-append-new">Append New Button</d2l-button>
					<d2l-button id="btn-remove-last">Remove Last Button</d2l-button>
					<br><br>
					<d2l-button id="btn-insert-content-above">Insert Content</d2l-button>
					<d2l-button id="btn-remove-content-above">Remove Content</d2l-button>
					<br><br>
					<div class="content">
						<p>I love Coffee!</p>
					</div>
					<d2l-floating-buttons id="wc-buttons-coffee" fix-obscured-focus>
						<d2l-button primary id="btn-make-more-coffee">Brew more Coffee!</d2l-button>
					</d2l-floating-buttons>
				</div>
			</div>

			<div id="CtnTwo" class="d2l-hidden">
				<br>
				<d2l-code-view language="html" hide-language>
					<textarea><d2l-floating-buttons id="wc-buttons" fix-obscured-focus>
						<d2l-button primary id="btn-make-more">Brew more Tea!</d2l-button>
					</d2l-floating-buttons></textarea>
				</d2l-code-view>

				<div class="content">
					<p>I love Tea!</p>
					<div style="height: 300px; width: 100px;"></div>
				</div>
				<d2l-floating-buttons id="wc-buttons-tea" fix-obscured-focus>
					<d2l-button primary id="btn-make-more-tea">Brew more Tea!</d2l-button>
				</d2l-floating-buttons>
			</div>
		</d2l-demo-page>

		<script type="module">
			/* faux tabbing functionality */
			const tabOne = document.getElementById('TabOne').parentNode;
			const ctnOne = document.getElementById('CtnOne');
			const tabTwo = document.getElementById('TabTwo').parentNode;
			const ctnTwo = document.getElementById('CtnTwo');
			tabOne.addEventListener('click', () => {
				tabOne.classList.add('vui-tabmenu-item-select');
				tabOne.classList.remove('vui-tabmenu-item-select-prev');
				ctnOne.classList.remove('d2l-hidden');
				tabTwo.classList.remove('vui-tabmenu-item-select');
				tabTwo.classList.add('vui-tabmenu-item-select-next');
				ctnTwo.classList.add('d2l-hidden');

				tabOne.dispatchEvent(new CustomEvent(
					'd2l-tab-panel-selected', { bubbles: true, composed: true }
				));
			});
			tabTwo.addEventListener('click', () => {
				tabOne.classList.add('vui-tabmenu-item-select-prev');
				tabOne.classList.remove('vui-tabmenu-item-select');
				ctnOne.classList.add('d2l-hidden');
				tabTwo.classList.remove('vui-tabmenu-item-select-next');
				tabTwo.classList.add('vui-tabmenu-item-select');
				ctnTwo.classList.remove('d2l-hidden');

				tabTwo.dispatchEvent(new CustomEvent(
					'd2l-tab-panel-selected', { bubbles: true, composed: true }
				));
			});
			/* end: faux tabbing functionality */
			let page_buttonCount = 0;
			let page_floatingButtons;
			function appendButton(beverage) {
				const floatingButtons = document.getElementById(`wc-buttons-${beverage}`);
				if (floatingButtons) {
					page_buttonCount += 1;
					const newButton = document.createElement('d2l-button');
					newButton.textContent = `${beverage} #${page_buttonCount}`;
					floatingButtons.appendChild(newButton);
				}
			}
			document.getElementById('btn-append-floating').addEventListener('click', () => {
				const coffeePage = document.querySelector('#CtnOne');
				if (page_floatingButtons) {
					coffeePage.appendChild(page_floatingButtons);
				}
			});
			document.getElementById('btn-remove-floating').addEventListener('click', () => {
				const floatingButtons = document.getElementById('wc-buttons-coffee');
				if (floatingButtons) {
					page_floatingButtons = floatingButtons;
					floatingButtons.parentNode.removeChild(floatingButtons);
				}
			});
			document.getElementById('btn-append-new').addEventListener('click', () => {
				appendButton('coffee');
			});
			document.getElementById('btn-remove-last').addEventListener('click', () => {
				const floatingButtons = document.getElementById('wc-buttons-coffee');
				if (floatingButtons.lastChild) {
					floatingButtons.removeChild(
						floatingButtons.lastChild
					);
				}
			});
			document.getElementById('btn-insert-content-above').addEventListener('click', () => {
				const newContent = document.createElement('p');
				newContent.textContent = 'I love Coffee!';
				document.body.querySelector('.content').appendChild(newContent);
			});
			document.getElementById('btn-remove-content-above').addEventListener('click', () => {
				const content = document.body.querySelector('.content');
				if (content.lastChild) {
					content.removeChild(content.lastChild);
				}
			});
			document.getElementById('btn-make-more-coffee').addEventListener('click', () => {
				appendButton('coffee');
			});
			document.getElementById('btn-make-more-tea').addEventListener('click', () => {
				appendButton('tea');
			});
		</script>
	</body>
</html>
