<!DOCTYPE html>
<html lang="en">

<head>
	<link rel="stylesheet" href="../../demo/styles.css" type="text/css">
	<script src="/node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>
	<script type="module">
		import '../../demo/demo-page.js';
		import '../../button/button.js';
		import '../../filter/filter.js';
		import '../../filter/filter-dimension-set.js';
		import '../../filter/filter-dimension-set-value.js';
	</script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
</head>

<body unresolved>

	<d2l-demo-page page-title="d2l-filter">

		<h2>Single Set Dimension</h2>
		<d2l-demo-snippet>
			<template>
				<d2l-filter>
					<d2l-filter-dimension-set key="course" text="Course">
						<d2l-filter-dimension-set-value key="art" text="Art"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="astronomy" text="Astronomy" selected></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="biology" text="Biology"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="chemistry" text="Chemistry"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="drama" text="Drama"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="english" text="English"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="how-to" text="How To Write a How To Article With a Flashy Title"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="math" text="Math"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="physics" text="Physics"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="stats" text="Statistics"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="writerscraft" text="Writer's Craft"></d2l-filter-dimension-set-value>
					</d2l-filter-dimension-set>
				</d2l-filter>
			</template>
		</d2l-demo-snippet>

		<h2>Multiple Set Dimensions</h2>
		<d2l-demo-snippet>
			<template>
				<d2l-filter>
					<d2l-filter-dimension-set key="course" text="Course">
						<d2l-filter-dimension-set-value key="art" text="Art"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="astronomy" text="Astronomy" selected></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="biology" text="Biology"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="chemistry" text="Chemistry"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="drama" text="Drama"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="english" text="English"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="how-to" text="How To Write a How To Article With a Flashy Title"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="math" text="Math"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="physics" text="Physics"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="stats" text="Statistics"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="writerscraft" text="Writer's Craft"></d2l-filter-dimension-set-value>
					</d2l-filter-dimension-set>
					<d2l-filter-dimension-set key="role" text="Role">
						<d2l-filter-dimension-set-value key="admin" text="Admin"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="instructor" text="Instructor"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="student" text="Student"></d2l-filter-dimension-set-value>
					</d2l-filter-dimension-set>
				</d2l-filter>
			</template>
		</d2l-demo-snippet>

		<h2>Loading and Empty State</h2>
		<d2l-demo-snippet>
			<template>
				<d2l-filter>
					<d2l-filter-dimension-set key="course" text="Course" loading></d2l-filter-dimension-set>
				</d2l-filter>
				<d2l-filter>
					<d2l-filter-dimension-set key="course" text="Course" loading></d2l-filter-dimension-set>
					<d2l-filter-dimension-set key="role" text="Role" loading></d2l-filter-dimension-set>
				</d2l-filter>
				<d2l-button id="finish-loading">Finish loading (in 5 seconds)</d2l-button>
			</template>
		</d2l-demo-snippet>

		<h2>Search</h2>
		<d2l-demo-snippet>
			<template>
				<d2l-filter>
					<d2l-filter-dimension-set key="none" text="No Search" search-type="none">
						<d2l-filter-dimension-set-value key="admin" text="Admin"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="instructor" text="Instructor"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="student" text="Student"></d2l-filter-dimension-set-value>
					</d2l-filter-dimension-set>
					<d2l-filter-dimension-set key="event" text="Event on Search" search-type="manual">
						<d2l-filter-dimension-set-value key="admin" text="Admin"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="instructor" text="Instructor"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="student" text="Student"></d2l-filter-dimension-set-value>
					</d2l-filter-dimension-set>
					<d2l-filter-dimension-set key="auto" text="Automatic Search" search-type="automatic">
						<d2l-filter-dimension-set-value key="admin" text="Admin"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="instructor" text="Instructor"></d2l-filter-dimension-set-value>
						<d2l-filter-dimension-set-value key="student" text="Student"></d2l-filter-dimension-set-value>
					</d2l-filter-dimension-set>
				</d2l-filter>
			</template>
		</d2l-demo-snippet>
	</d2l-demo-page>

	<script type="module">
		document.addEventListener('d2l-filter-change', e => {
			console.log(`Filter selection changed for dimension "${e.detail.dimension}":`, e.detail.value);
		});

		document.addEventListener('d2l-filter-dimension-first-open', e => {
			console.log(`Filter dimension opened for the first time: ${e.detail.key}`);
		});

		document.addEventListener('d2l-filter-dimension-search', e => {
			const dimension = e.target.querySelector(`d2l-filter-dimension-set[key="${e.detail.key}"]`);
			const values = dimension.querySelectorAll('d2l-filter-dimension-set-value');

			values.forEach(value => {
				if (e.detail.value === '') {
					value.hidden = false;
				} else {
					if (value.text.toLowerCase().indexOf(e.detail.value.toLowerCase()) > -1) {
						value.hidden = false;
					} else {
						value.hidden = true;
					}
				}
			});
			setTimeout(() => {
				e.detail.searchCompleteCallback();
				console.log(`Filter dimension "${e.detail.key}" searched: ${e.detail.value}`);
			}, 2000);
		});

		document.getElementById('finish-loading').addEventListener('click', e => {
			e.target.disabled = true;
			setTimeout(() => {
				const loadingFilters = document.querySelectorAll('d2l-filter-dimension-set[loading]');
				loadingFilters.forEach(filter => {
					filter.loading = false;
				});
				e.target.textContent = 'Done Loading';
			}, 5000);
		});
	</script>

</body>
</html>
